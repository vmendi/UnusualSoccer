<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:Team="GameView.Team.*" xmlns:GameView="GameView.*"
		 width="400" height="226">
	
	<fx:Style source="../styles.css"/>
	
	<fx:Script>
		<![CDATA[
			import GameModel.MatchResultUtils;
			import GameModel.TeamModel;
			
			import mx.collections.ArrayCollection;
			
			public static function Show(matchResult : Object) : void
			{
				var dialog : InjuredDialog = AnimatableDialog.Show(getDefinitionByName("GameView.Match::InjuredDialog") as Class) as InjuredDialog;
				
				var teamModel : TeamModel = SoccerClient.GetMainGameModel().TheTeamModel; 
				var myResult : Object = MatchResultUtils.GetMyResult(matchResult,teamModel);
				
				var injured : ArrayCollection = myResult.InjuredSoccerPlayers;
				
				for each(var soccerPlayerID : int in injured)
				{
					dialog.mInjured.addItem(teamModel.GetSoccerPlayerByID(soccerPlayerID));					
				}
			}
			
			protected function CloseClickHandler(event:MouseEvent):void
			{
				AnimatableDialog.Dismiss(this, null);
			}
			
			[Bindable] private var mInjured : ArrayCollection = new ArrayCollection();
		]]>
	</fx:Script>
	
	<GameView:PopupBackground width="100%" height="100%" />
	
	<s:Group x="0" y="20">
		<s:layout>
			<s:VerticalLayout />
		</s:layout>
		<s:Label width="400" text="{resourceManager.getString('main','InjuredDialogTitle')}" styleName="whiteBoldHuge" textAlign="center"/>
		<s:Label width="400" text="{resourceManager.getString('main','InjuredDialogTxt')}" styleName="whiteBoldMedium" textAlign="center"/>
	</s:Group>

	
	<s:Rect left="20" right="20" top="92" height="82" radiusX="4">
		<s:stroke>
			<s:SolidColorStroke caps="none" color="#CCCCCC" joints="miter" miterLimit="4"
								weight="2"/>
		</s:stroke>
		<s:fill>
			<s:SolidColor color="#DDD9D9"/>
		</s:fill>
		<s:filters>
			<s:DropShadowFilter alpha="0.5" angle="90" blurX="40" blurY="40" color="#000000"
								distance="0" hideObject="false" inner="true" knockout="false"
								quality="2" strength="1.1"/>
		</s:filters>
	</s:Rect>
	
	<s:List id="MyInjuredList" dataProvider="{mInjured}" left="20" right="20" top="102" height="72"
			verticalScrollPolicy="off" horizontalScrollPolicy="off"
			itemRenderer="GameView.Team.FieldCap" useVirtualLayout="false"
			skinClass="GameView.Skins.DefaultListSkin"
			horizontalCenter="0">
		<s:layout><s:HorizontalLayout gap="20" /></s:layout>
	</s:List> 
		
	<s:Button label="CERRAR" horizontalCenter="0" bottom="15" click="CloseClickHandler(event)" minWidth="80" skinClass="GameView.Skins.ButtonDarkGreySkin" />
	
</s:Group>
