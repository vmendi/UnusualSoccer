<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:GameView="GameView.*"
		 xmlns:Team="GameView.Team.*"
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 width="100%" height="100%"
		 creationComplete="CreationCompleteHandler(event)"
		 addedToStage="AddedToStageHandler(event)">
	
	<fx:Style source="../styles.css"/>
	
	<fx:Script><![CDATA[
		import GameModel.SpecialTrainingModel;
		import GameModel.TeamModel;
		
		import GameView.HierarchyUtils;
		import GameView.MainView;
		import GameView.Skins.ButtonGreySkin;
		
		import mx.events.FlexEvent;
		
		import utils.MD5;
		
		protected function AddedToStageHandler(event:Event):void
		{
			// TODO Auto-generated method stub
			GameMetrics.ReportPageView(GameMetrics.VIEW_TEAM);
		}
		
		protected function CreationCompleteHandler(event:FlexEvent):void
		{
			mTeamModel = SoccerClient.GetMainGameModel().TheTeamModel;
			mSpecialTrainingModel = SoccerClient.GetMainGameModel().TheSpecialTrainingModel;
		}
		
		protected function TrainClickHandler(event:MouseEvent):void
		{
			(HierarchyUtils.FindParentOfType(this, "GameView::MainView") as MainView).ChangeStateToSpecialTrainings();
		}
		
		protected function TrainingTeamClickHandler(event:MouseEvent):void
		{
			(HierarchyUtils.FindParentOfType(this, "GameView::MainView") as MainView).ChangeStateToTeamTraining();
		}
		
		[Bindable]
		private var mTeamModel : TeamModel;
		
		[Bindable]
		private var mSpecialTrainingModel : SpecialTrainingModel;
		
	]]></fx:Script>
	
	<s:Group top="10" bottom="10" left="10">
		<s:layout><s:VerticalLayout gap="10"/></s:layout>
		
		<s:Panel title="{resourceManager.getString('main','TeamPanelTacticsTitle')}" skinClass="GameView.Skins.DefaultPanelSkin" controlBarVisible="true" width="188" height="142">
			<s:layout><s:VerticalLayout paddingTop="15" gap="15" horizontalAlign="center"  /></s:layout>
			<Team:FormationSelector />
			<s:Label width="168" text="{resourceManager.getString('main','TeamPanelTacticsTxt')}" 
					 maxDisplayedLines="3" textAlign="center" styleName="whiteBoldMediumArial" />
		</s:Panel>
		
		<s:Panel title="{resourceManager.getString('main','TeamPanelSpecialSkillsTitle')}" skinClass="GameView.Skins.DefaultPanelSkin" controlBarVisible="true" width="188" height="318">
			<s:layout><s:VerticalLayout horizontalAlign="center" paddingTop="19" gap="15" /></s:layout>
			<GameView:SpecialSkillsBrowser SpecialSkillIDs="{mTeamModel.TheTeamDetails.SpecialSkillsIDs}"/>
			<s:Label width="158" textAlign="center" maxDisplayedLines="3"
					 text="{resourceManager.getString('main','TeamPanelSpecialSkillsTxt')}" styleName="whiteBoldMediumArial" />
			<s:Button width="168" height="27" label="{resourceManager.getString('main','TeamPanelSpecialSkillsButton')}" skinClass="GameView.Skins.ButtonGreySkin"
					  click="TrainClickHandler(event)"/>
		</s:Panel>
	</s:Group>	
	<s:Panel  title="{resourceManager.getString('main','TeamPanelAlignTitle')}" skinClass="GameView.Skins.DefaultPanelSkin" controlBarVisible="true" top="10" height="470" horizontalCenter="0">
		<s:layout><s:VerticalLayout horizontalAlign="center" gap="10" /></s:layout>
		<Team:Field/> 
		<s:Label width="300" textAlign="center" maxDisplayedLines="3"
				 text="{resourceManager.getString('main','TeamPanelTeamTraningsTxt')}" styleName="whiteBoldMediumArial" />
		<s:Button width="168" height="27" label="{resourceManager.getString('main','TeamPanelTeamTrainingButton')}" skinClass="GameView.Skins.ButtonGreySkin"
				  click="TrainingTeamClickHandler(event)"/>
	</s:Panel>
	<!-- Los substitutos quedan al margen en la primera versiÃ³n de tuenti chapas-->
	<!--<Team:Substitutes top="344" horizontalCenter="0" />-->
	
	<Team:CapPanel width="188" right="10" top="10" bottom="10" title="{resourceManager.getString('main','TeamPanelPlayerTitle')}"/>
	
</s:Group>