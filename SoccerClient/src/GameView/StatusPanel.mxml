<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="760" height="65"
		 creationComplete="CreationCompleteHandler(event)" xmlns:GameView="GameView.*">
	
	<fx:Style source="styles.css" />

	<fx:Script><![CDATA[
		import GameModel.MainGameModel;
		import GameModel.TeamModel;
		
		import GameView.Purchase.PurchaseBase;
		
		import flash.utils.getDefinitionByName;
		
		import mx.events.FlexEvent;

		protected function CreationCompleteHandler(event:FlexEvent):void
		{
			mMainGameModel = SoccerClient.GetMainGameModel();
			mTeamModel = mMainGameModel.TheTeamModel;
		}
		
		protected function MyAddSkillPoints_clickHandler(event:MouseEvent):void
		{
			PurchaseBase.ShowPurchase(getDefinitionByName("GameView.Purchase.PurchaseSkillPoints") as Class);
		}
		
		[Bindable] private var mMainGameModel : MainGameModel;
		[Bindable] private var mTeamModel : TeamModel;
		
		protected function OnHallOfFameClickHandler(event:MouseEvent):void
		{
			(HierarchyUtils.FindParentOfType(this, "GameView::MainView") as MainView).ChangeStateToRanking();			
		}
		
	]]></fx:Script>
	
	<fx:Declarations>
		<s:GlowFilter id="txtGlowFilter" blurX="18" blurY="18" color="0xFFFFFF"/>
	</fx:Declarations>
	
	<s:Image source="@Embed(source='/Assets/General.swf', symbol='StatusPanelBackground')"/>
	
	<GameView:BadgeTeam x="10" y="10" TeamName="{mTeamModel.PredefinedTeamName}" BigMode="true" />
	<s:BorderContainer x="76" y="0" width="104" borderStyle="solid">
		<s:backgroundFill><s:SolidColor color="red" alpha="0"/></s:backgroundFill>
		<s:Label x="0" y="34" text="{mTeamModel.PredefinedTeamName}" styleName="whiteBoldVeryBig" id="MyPredefinedTeamLabel" filters="{txtGlowFilter}"/> 
		<s:Label x="0" y="7" text="{mTeamModel.TheTeam.Name}" styleName="whiteBoldBig" id="MyTeamNameLabel" filters="{txtGlowFilter}"/>	
	</s:BorderContainer>
	
	<s:Button id="MyHallOfFameButton" label="Hall of Fame" x="190" y="0" click="OnHallOfFameClickHandler(event)" />
	
	<s:Group right="0">
		<s:layout>
			<s:HorizontalLayout gap="6" />
		</s:layout>
		<s:Group>
			<GameView:BadgeCategory x="354" y="25" TrueSkill="{mTeamModel.TheTeam.TrueSkill}" />	
		</s:Group>

		<s:Group x="500" y="0">
			<s:layout>
				<s:HorizontalLayout gap="0"/>
			</s:layout>
			<s:Rect width="8" height="65">
				<s:fill>
					<s:LinearGradient rotation="0">
						<s:GradientEntry alpha="0.0" color="#000000" ratio="0"/>
						<s:GradientEntry alpha="0.5" color="#000000" ratio="1"/>
					</s:LinearGradient>
				</s:fill>
			</s:Rect>
			<s:Group height="65">
				<s:layout>
					<s:VerticalLayout gap="1"/>
				</s:layout>
				<s:Group>
					<s:Rect x="0" y="0" width="153" height="21" alpha="0.5">
						<s:fill>
							<s:SolidColor color="#000000"/>
						</s:fill>
					</s:Rect>
					<s:Label x="6" y="3" text="HABILIDAD" width="90" styleName="whiteBoldMedium" textAlign="left"/>
					<s:Label right="6" y="3" text="{mTeamModel.TheTeam.TrueSkill}" width="46" id="MyTrueSkillLabel" styleName="whiteBoldMedium" textAlign="right"/>
				</s:Group>
				<s:Group>
					<s:Rect x="0" y="0" width="153" height="21" alpha="0.5">
						<s:fill>
							<s:SolidColor color="#000000"/>
						</s:fill>
					</s:Rect>
					<s:Label x="6" y="3" text="XP" width="90" styleName="whiteBoldMedium" textAlign="left"/>
					<s:Label right="6" y="3" text="{mTeamModel.TheTeam.XP}" width="46" id="MyXPLabel" styleName="whiteBoldMedium" textAlign="right"/>
				</s:Group>
				<s:Group>
					<s:Rect x="0" y="0" width="153" height="21" alpha="0.5">
						<s:fill>
							<s:SolidColor color="#000000"/>
						</s:fill>
					</s:Rect>
					<s:Label x="6" y="3" text="ENTRENAMIENTO" width="90" styleName="whiteBoldMedium" textAlign="left"/>
					<s:Label right="6" y="3" text="{mTeamModel.TheTeam.Fitness}%" width="46" id="MyTrainingLabel" styleName="whiteBoldMedium" textAlign="right"/>
				</s:Group>
			</s:Group>
			<s:Rect width="8" height="65">
				<s:fill>
					<s:LinearGradient rotation="180">
						<s:GradientEntry alpha="0.0" color="#000000" ratio="0"/>
						<s:GradientEntry alpha="0.5" color="#000000" ratio="1"/>
					</s:LinearGradient>
				</s:fill>
			</s:Rect>
		</s:Group>
		
		<s:Group width="102" height="6">
			<s:layout>
				<s:HorizontalLayout verticalAlign="middle" horizontalAlign="center" gap="5" />
			</s:layout>
			<s:Image source="@Embed(source='/Assets/General.swf', symbol='IconMahouPoints')"/>
			<s:Label x="701" y="34" text="{mTeamModel.TheTeam.SkillPoints}" id="MySkillPointsLabel" styleName="whiteBoldVeryBig" textAlign="left" filters="{txtGlowFilter}"/>
			<s:Button id="MyAddSkillPoints" click="MyAddSkillPoints_clickHandler(event)" label="Add" />
		</s:Group>
		
		<GameView:TicketsPanel />
		
	</s:Group>
	
</s:Group>
